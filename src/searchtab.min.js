var searchTabApp=angular.module("SearchTag",[]);searchTabApp.directive("searchtag",function(){return{restrict:"E",replace:!0,scope:!0,link:function(e,t,a){e.holder=a.placeholder,e.action=a.btnAction,e.results=[],e.confirm=0,e.callback=[],e.addToModel=function(t){e.searchFilter=t,e.searchFilter+=":",document.getElementById("searchtaginput").focus()},e.addToResult=function(t){t=t.replace(",","");var a={},l=t.split(":");a[l[0]]=l[1];var r=JSON.parse(JSON.stringify(a)),c={name:t};e.results.push(c),e.callback.push(r),e.searchFilter=null},e.removeTagOnBackspace=function(t){void 0==e.searchFilter&&8===t.keyCode&&(e.confirm=e.confirm+1,2==e.confirm&&(e.results.splice(e.results.$last,1),e.callback.splice(e.results.$last,1),e.confirm=0))},e.removeFilteredItem=function(t){e.results.splice(t,1),e.callback.splice(t,1),document.getElementById("searchtaginput").focus()},e.$watch(function(e){return e.searchFilter},function(t){void 0!=t&&t.indexOf(",")>-1&&e.addToResult(e.searchFilter)})},template:'<div id="searchtagmain" style="position:relative"><div class="selectElements" ng-show="searchFilter"><div ng-repeat="elem in searchElements | filter:searchFilter"><p ng-click="addToModel(elem.name)">{{elem.name}}</p></div></div><div class="input-group form-control"><div class="resultSearchField" ng-repeat="res in results"><span class="label label-primary" ng-click="removeFilteredItem($index)">{{res.name}}</span></div><input id="searchtaginput" ng-model="searchFilter"ng-keydown="removeTagOnBackspace($event)" type="text" class="" placeholder="{{holder}}" /><span class="input-group-btn"><button class="btn btn-primary" ng-click="searchFilterAction(callback)">{{action}}</button></span></div></div>'}});